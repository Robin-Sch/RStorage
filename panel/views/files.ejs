<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>RStorage panel</title>
		<link rel="stylesheet" href="/css/index.css">
		<script src="/js/download.min.js"></script>
		<script src="/js/main.js"></script>
	</head>
    <body>
        <form method="POST" action="/files/upload?path=<%=path%>" enctype="multipart/form-data">
            <input type="submit" value="upload" />
            <input type="file" name="upload" />
        </form>

        <button onclick="dirCreate();">Create directory</button>
        <input id="createDirectory" type="text" value="<%=path%>">

        <table>
            <tr>
                <th>Name</th>
            </tr>
            <% if (path !== '/') { %>
                <tr>
                    <td><a onclick="moveoneback();">../</a></td>
                </tr>
            <% } %>
            <%directories.forEach(directory => {%>
                <tr>
                    <td><a href="?path=<%=directory%>"><%=directory%></a></td>
                </tr>
            <%})%>
            <%files.forEach(file => { %>
                <tr>
                    <td><%=file%></td>
                    <th><button onclick="fileDelete('<%=path%>', '<%=file%>');">Delete</button></th>
                    <th><button onclick="fileDownload('<%=path%>', '<%=file%>');">Download</button></th>
                </tr>
            <% }); %>
        </table>

        <p id="response" style="color: red"></p>
    </body>
</html>